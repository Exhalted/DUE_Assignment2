(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))a($);new MutationObserver($=>{for(const d of $)if(d.type==="childList")for(const I of d.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&a(I)}).observe(document,{childList:!0,subtree:!0});function s($){const d={};return $.integrity&&(d.integrity=$.integrity),$.referrerPolicy&&(d.referrerPolicy=$.referrerPolicy),$.crossOrigin==="use-credentials"?d.credentials="include":$.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a($){if($.ep)return;$.ep=!0;const d=s($);fetch($.href,d)}})();(function(h){Date.now||(Date.now=function(){return new Date().getTime()}),Math.trunc||(Math.trunc=function(c){return c<0?Math.ceil(c):Math.floor(c)}),Object.setPrototypeOf||(Object.setPrototypeOf=function(c,s){return c.__proto__=s,c}),h.WebSharper={Runtime:{Ctor:function(c,s){return c.prototype=s.prototype,c},Class:function(c,s,a){var $=c,d,I,ee;if(s){$=new s;for(d in c)$[d]=c[d]}if(I=function(W){if(W)for(var de in W)this[de]=W[de]},I.prototype=$,a)for(ee in a)I[ee]=a[ee];return I},Clone:function(c){var s={};for(var a of Object.getOwnPropertyNames(c))s[a]=c[a];return Object.setPrototypeOf(s,Object.getPrototypeOf(c)),s},NewObject:function(c){for(var s={},a=0;a<c.length;a++)s[c[a][0]]=c[a][1];return s},PrintObject:function(c){var s="{ ",a=!0;for(var $ of Object.getOwnPropertyNames(c))a?a=!1:s+=", ",s+=$+" = "+c[$];return s+(a?"}":" }")},DeleteEmptyFields:function(c,s){for(var a,$=0;$<s.length;$++)a=s[$],c[a]===void 0&&delete c[a];return c},GetOptional:function(c){return c===void 0?null:{$:1,$0:c}},SetOptional:function(c,s,a){a?c[s]=a.$0:delete c[s]},SetOrDelete:function(c,s,a){a===void 0?delete c[s]:c[s]=a},Apply:function(c,s,a){return c.apply(s,a)},Bind:function(c){return function(){return c.apply(this,arguments)}},CreateFuncWithArgs:function(c){return function(){return c(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(c){return function(){return c(this)}},CreateFuncWithThis:function(c){return function(){return c(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(c){return function(){return c(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(c,s){return function(){return s(Array.prototype.slice.call(arguments,0,c).concat([Array.prototype.slice.call(arguments,c)]))}},CreateFuncWithArgsRest:function(c,s){return function(){return s([Array.prototype.slice.call(arguments,0,c),Array.prototype.slice.call(arguments,c)])}},BindDelegate:function(c,s){var a=c.bind(s);return a.$Func=c,a.$Target=s,a},CreateDelegate:function(c){if(c.length==0)return null;if(c.length==1)return c[0];var s=function(){for(var a,$=0;$<c.length;$++)a=c[$].apply(null,arguments);return a};return s.$Invokes=c,s},CombineDelegates:function(c){for(var s,a=[],$=0;$<c.length;$++)s=c[$],s&&("$Invokes"in s?a=a.concat(s.$Invokes):a.push(s));return WebSharper.Runtime.CreateDelegate(a)},DelegateEqual:function(c,s){var a,$,d,I,ee;if(c===s)return!0;if(c==null||s==null||(a=c.$Invokes||[c],$=s.$Invokes||[s],a.length!=$.length))return!1;for(d=0;d<a.length;d++)if(I=a[d],ee=$[d],!(I===ee||"$Func"in I&&"$Func"in ee&&I.$Func===ee.$Func&&I.$Target==ee.$Target))return!1;return!0},ThisFunc:function(c){return function(){var s=Array.prototype.slice.call(arguments);return s.unshift(this),c.apply(null,s)}},ThisFuncOut:function(c){return function(){var s=Array.prototype.slice.call(arguments);return c.apply(s.shift(),s)}},ParamsFunc:function(c,s){return function(){var a=Array.prototype.slice.call(arguments);return s.apply(null,a.slice(0,c).concat([a.slice(c)]))}},ParamsFuncOut:function(c,s){return function(){var a=Array.prototype.slice.call(arguments);return s.apply(null,a.slice(0,c).concat(a[c]))}},ThisParamsFunc:function(c,s){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(this),s.apply(null,a.slice(0,c+1).concat([a.slice(c+1)]))}},ThisParamsFuncOut:function(c,s){return function(){var a=Array.prototype.slice.call(arguments);return s.apply(a.shift(),a.slice(0,c).concat(a[c]))}},Curried:function(c,s,a){return a=a||[],function($){var d=a.concat([$===void 0?null:$]);return s==1?c.apply(null,d):s==2?function(I){return c.apply(null,d.concat([I===void 0?null:I]))}:WebSharper.Runtime.Curried(c,s-1,d)}},Curried2:function(c){return function(s){return function(a){return c(s,a)}}},Curried3:function(c){return function(s){return function(a){return function($){return c(s,a,$)}}}},UnionByType:function(c,s,a){for(var $,d=typeof s,I=0;I<c.length;I++)if($=c[I],typeof $=="number"){if(Array.isArray(s)&&($==0||s.length==$))return{$:I,$0:s}}else if($==d)return{$:I,$0:s};if(!a)throw new Error("Type not expected for creating Choice value.")},MarkResizable:function(c){return Object.defineProperty(c,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),c},MarkReadOnly:function(c){return Object.defineProperty(c,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),c},ScriptBasePath:"./",ScriptPath:function(c,s){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":c+"/")+s},OnLoad:function(c){"load"in this||(this.load=[]),this.load.push(c)},Start:function(){function c(s){for(var a=0;a<s.length;a++)s[a]()}"load"in this&&(c(this.load),this.load=[])}}},h.WebSharper.Runtime.OnLoad(function(){h.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()}),h.ignore=function(){},h.id=function(c){return c},h.fst=function(c){return c[0]},h.snd=function(c){return c[1]},h.trd=function(c){return c[2]},h.console||(h.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);(function(h,c){c=h.Element.prototype,c.matches||(c.matches=c.msMatchesSelector||function(s){for(var a=(this.document||this.ownerDocument).querySelectorAll(s),$=0;a[$]&&a[$]!==e;++$);return!!a[$]}),c.closest||(c.closest=function(s){for(var a=this;a&&a.nodeType==1;){if(a.matches(s))return a;a=a.parentNode}return null})})(self);(function(){for(var h=0,c=["webkit","moz"],s=0;s<c.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[c[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[s]+"CancelAnimationFrame"]||window[c[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var $=new Date().getTime(),d=Math.max(0,16-($-h)),I=window.setTimeout(function(){a($+d)},d);return h=$+d,I}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})})();(function(h){var c,s,a,$,d,I,ee,W,de,T,ze,Nt,S,y,Ze,f,R,re,Q,ye,A,Z,E,Pe,q,Ae,xe,F,Re,ie,le,Oe,O,ce,D,te,B,ve,ae,We,he,Xe,Fe,ge,w,at,J,Ee,Ve,Qe,z,tt,ct,Se,st,ft,ht,De,pe,Le,pt,X,k,Y,_e,Ie,dt,$t,Ke,H,Ue,se,Ye,nt,$e,Me,ke,rt,ue,mt,oe,be,we,me,qe,je,yt,vt,N,Ce,it;c=h.Assignment2=h.Assignment2||{},s=c.Expenses=c.Expenses||{},a=h.WebSharper=h.WebSharper||{},$=a.Operators=a.Operators||{},d=a.UI=a.UI||{},I=d.View=d.View||{},ee=a.Utils=a.Utils||{},W=a.Obj=a.Obj||{},de=d.Var=d.Var||{},T=d.Doc=d.Doc||{},ze=a.JavaScript=a.JavaScript||{},Nt=ze.Pervasives=ze.Pervasives||{},S=d.Snap=d.Snap||{},y=a.Unchecked=a.Unchecked||{},Ze=ze.JS=ze.JS||{},f=a.Arrays=a.Arrays||{},R=a.Strings=a.Strings||{},re=h.StartupCode$Assignment2$Client=h.StartupCode$Assignment2$Client||{},Q=d.AttrProxy=d.AttrProxy||{},ye=d.Client=d.Client||{},A=ye.Templates=ye.Templates||{},Z=d.DomUtility=d.DomUtility||{},E=d.Docs=d.Docs||{},Pe=h.Object,q=a.Seq=a.Seq||{},Ae=d.Var$1=d.Var$1||{},xe=d.AttrModule=d.AttrModule||{},F=d.Attrs=d.Attrs||{},Re=h.Node,ie=a.Collections=a.Collections||{},le=ie.Dictionary=ie.Dictionary||{},Oe=d.ConcreteVar=d.ConcreteVar||{},O=a.Enumerator=a.Enumerator||{},ce=O.T=O.T||{},D=d.BindVar=d.BindVar||{},te=h.StartupCode$WebSharper_UI$Templates=h.StartupCode$WebSharper_UI$Templates||{},B=ie.HashSet=ie.HashSet||{},ve=d.Elt=d.Elt||{},ae=d.Array=d.Array||{},We=d.DocElemNode=d.DocElemNode||{},he=a.List=a.List||{},Xe=he.T=he.T||{},Fe=d.Abbrev=d.Abbrev||{},ge=Fe.Fresh=Fe.Fresh||{},w=h.StartupCode$WebSharper_UI$Attr_Client=h.StartupCode$WebSharper_UI$Attr_Client||{},at=ie.DictionaryUtil=ie.DictionaryUtil||{},J=A.Prepare=A.Prepare||{},Ee=a.Slice=a.Slice||{},Ve=ie.KeyCollection=ie.KeyCollection||{},Qe=a.Numeric=a.Numeric||{},z=d.An=d.An||{},tt=ye.Settings=ye.Settings||{},ct=Fe.Mailbox=Fe.Mailbox||{},Se=d.Updates=d.Updates||{},st=ye.Attrs=ye.Attrs||{},ft=st.Dyn=st.Dyn||{},ht=a.Queue=a.Queue||{},De=d.String=d.String||{},pe=d.CheckedInput=d.CheckedInput||{},Le=ye.Docs=ye.Docs||{},pt=Le.RunState=Le.RunState||{},X=Le.NodeSet=Le.NodeSet||{},k=a.Concurrency=a.Concurrency||{},Y=d.Anims=d.Anims||{},_e=h.StartupCode$WebSharper_UI$Doc_Proxy=h.StartupCode$WebSharper_UI$Doc_Proxy||{},Ie=h.StartupCode$WebSharper_UI$Abbrev=h.StartupCode$WebSharper_UI$Abbrev||{},dt=a.Char=a.Char||{},$t=a.DateUtil=a.DateUtil||{},Ke=d.DynamicAttrNode=d.DynamicAttrNode||{},H=h.StartupCode$WebSharper_UI$DomUtility=h.StartupCode$WebSharper_UI$DomUtility||{},Ue=h.StartupCode$WebSharper_UI$Animation=h.StartupCode$WebSharper_UI$Animation||{},se=d.AppendList=d.AppendList||{},Ye=ie.HashSetUtil=ie.HashSetUtil||{},nt=h.Error,$e=a.KeyNotFoundException=a.KeyNotFoundException||{},Me=k.Scheduler=k.Scheduler||{},ke=d.Easing=d.Easing||{},rt=k.AsyncBody=k.AsyncBody||{},ue=h.StartupCode$WebSharper_Main$Concurrency=h.StartupCode$WebSharper_Main$Concurrency||{},mt=k.CT=k.CT||{},oe=Fe.HashSet=Fe.HashSet||{},be=a.CancellationTokenSource=a.CancellationTokenSource||{},we=Le.DomNodes=Le.DomNodes||{},me=a.OperationCanceledException=a.OperationCanceledException||{},qe=a.Lazy=a.Lazy||{},je=h.StartupCode$WebSharper_UI$AppendList=h.StartupCode$WebSharper_UI$AppendList||{},yt=a.LazyExtensionsProxy=a.LazyExtensionsProxy||{},vt=yt.LazyRecord=yt.LazyRecord||{},N=a&&a.Runtime,Ce=h.console,it=h.Date,s.Main=function(){var t;t=T.Element("div",[],[T.Element("h1",[],[T.TextView(I.Map(function(n){return"Current Income: "+ee.prettyPrint(n)},s.income().get_View()))]),T.IntInputUnchecked([],s.incomeInput()),T.Element("button",[Q.HandlerImpl("click",function(){return function(){return s.updateIncome(s.incomeInput().Get())}})],[T.TextNode("Update Income")]),T.Element("h1",[],[T.TextView(I.Map(function(n){return"Current Expenses: "+ee.prettyPrint(n)},s.expense().get_View()))]),T.IntInputUnchecked([],s.expenseInput()),T.Element("button",[Q.HandlerImpl("click",function(){return function(){return s.updateExpense(s.expenseInput().Get())}})],[T.TextNode("Update Expense")])]),A.LoadLocalTemplates(""),T.RunById("main",t)},s.income=function(){return re.$cctor(),re.income},s.incomeInput=function(){return re.$cctor(),re.incomeInput},s.updateIncome=function(t){s.income().Set(s.income().Get()+t)},s.expense=function(){return re.$cctor(),re.expense},s.expenseInput=function(){return re.$cctor(),re.expenseInput},s.updateExpense=function(t){s.expense().Set(s.expense().Get()+t)},$.FailWith=function(t){throw new nt(t)},$.KeyValue=function(t){return[t.K,t.V]},$.range=function(t,n){var r;return r=1+n-t,r<=0?[]:q.init(r,function(i){return i+t})},I.Map=function(t,n){return I.CreateLazy(function(){return S.Map(t,n())})},I.CreateLazy=function(t){var n;return n={c:null,o:t},function(){var r,i;return r=n.c,r===null&&(r=n.o(),n.c=r,i=r.s,i!=null&&i.$==0?n.o=null:S.WhenObsoleteRun(r,function(){n.c=null})),r}},I.Const=function(t){var n;return n=S.New({$:0,$0:t}),function(){return n}},I.Sink=function(t,n){function r(){S.WhenRun(n(),t,function(){k.scheduler().Fork(r)})}k.scheduler().Fork(r)},I.Map2Unit=function(t,n){return I.CreateLazy(function(){return S.Map2Unit(t(),n())})},ee.prettyPrint=function(t){var n,r;function i(u,o){return u+" = "+ee.prettyPrint(o)}return t===null?"null":(n=typeof t,n=="string"?'"'+t+'"':n=="object"?t instanceof h.Array?"[|"+R.concat("; ",f.map(ee.prettyPrint,t))+"|]":(r=h.String(t),r=="[object Object]"?"{"+R.concat("; ",f.map(function(u){return i(u[0],u[1])},Ze.GetFields(t)))+"}":r):h.String(t))},W=a.Obj=N.Class({Equals:function(t){return this===t},GetHashCode:function(){return-1}},null,W),W.New=N.Ctor(function(){},W),de=d.Var=N.Class({},W,de),de.New=N.Ctor(function(){W.New.call(this)},de),T=d.Doc=N.Class({},W,T),T.TextNode=function(t){return T.Mk({$:5,$0:self.document.createTextNode(t)},I.Const())},T.TextView=function(t){var n;return n=E.CreateTextNode(),T.Mk({$:4,$0:n},I.Map(function(r){E.UpdateTextNode(n,r)},t))},T.IntInputUnchecked=function(t,n){return T.InputInternal("input",function(){return q.append(t,[n.Get()===0?Q.Create("value","0"):F.EmptyAttr(),xe.IntValueUnchecked(n),Q.Create("type","number")])})},T.RunById=function(t,n){var r;r=self.document.getElementById(t),y.Equals(r,null)?$.FailWith("invalid id: "+t):T.Run(r,n)},T.Element=function(t,n,r){var i,u;return i=Q.Concat(n),u=T.Concat(r),ve.New(self.document.createElement(t),i,u)},T.Mk=function(t,n){return new T.New(t,n)},T.InputInternal=function(t,n){var r;return r=self.document.createElement(t),ve.New(r,Q.Concat(n(r)),T.get_Empty())},T.Run=function(t,n){E.LinkElement(t,n.docNode),T.RunInPlace(!1,t,n)},T.Concat=function(t){var n;return n=ae.ofSeqNonCopying(t),ae.TreeReduce(T.get_Empty(),T.Append,n)},T.get_Empty=function(){return T.Mk(null,I.Const())},T.RunInPlace=function(t,n,r){var i;i=E.CreateRunState(n,r.docNode),I.Sink(z.get_UseAnimations()||tt.BatchUpdatesEnabled()?ct.StartProcessor(E.PerformAnimatedUpdate(t,i,r.docNode)):function(){E.PerformSyncUpdate(t,i,r.docNode)},r.updates)},T.Append=function(t,n){return T.Mk({$:0,$0:t.docNode,$1:n.docNode},I.Map2Unit(t.updates,n.updates))},T.New=N.Ctor(function(t,n){W.New.call(this),this.docNode=t,this.updates=n},T),Nt.NewFromSeq=function(t){var n,r,i;n={},r=O.Get(t);try{for(;r.MoveNext();)i=r.Current(),n[i[0]]=i[1]}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}return n},S.Map=function(t,n){var r,i;return r=n.s,r!=null&&r.$==0?S.New({$:0,$0:t(r.$0)}):(i=S.New({$:3,$0:[],$1:[]}),S.When(n,function(u){S.MarkDone(i,n,t(u))},i),i)},S.WhenObsoleteRun=function(t,n){var r;r=t.s,r==null?n():(r!=null&&r.$==2||r!=null&&r.$==3)&&r.$1.push(n)},S.When=function(t,n,r){var i;i=t.s,i==null?S.Obsolete(r):i!=null&&i.$==2?(S.EnqueueSafe(i.$1,r),n(i.$0)):i!=null&&i.$==3?(i.$0.push(n),S.EnqueueSafe(i.$1,r)):n(i.$0)},S.MarkDone=function(t,n,r){var i;i=n.s,i!=null&&i.$==0?S.MarkForever(t,r):S.MarkReady(t,r)},S.EnqueueSafe=function(t,n){var r,i,u,o;if(t.push(n),t.length%20===0)for(r=t.slice(0),ht.Clear(t),i=0,u=f.length(r)-1;i<=u;i++)o=f.get(r,i),typeof o=="object"?function(l){l.s&&t.push(l)}(o):function(l){t.push(l)}(o)},S.MarkForever=function(t,n){var r,i,u,o;if(r=t.s,r!=null&&r.$==3)for(t.s={$:0,$0:n},i=r.$0,u=0,o=f.length(i)-1;u<=o;u++)f.get(i,u)(n)},S.MarkReady=function(t,n){var r,i,u,o;if(r=t.s,r!=null&&r.$==3)for(t.s={$:2,$0:n,$1:r.$1},i=r.$0,u=0,o=f.length(i)-1;u<=o;u++)f.get(i,u)(n)},S.WhenRun=function(t,n,r){var i;i=t.s,i==null?r():i!=null&&i.$==2?(i.$1.push(r),n(i.$0)):i!=null&&i.$==3?(i.$0.push(n),i.$1.push(r)):n(i.$0)},S.Copy=function(t){var n,r,i;return n=t.s,n==null?t:n!=null&&n.$==2?(r=S.New({$:2,$0:n.$0,$1:[]}),S.WhenObsolete(t,r),r):n!=null&&n.$==3?(i=S.New({$:3,$0:[],$1:[]}),S.When(t,function(u){S.MarkDone(i,t,u)},i),i):t},S.Map2Unit=function(t,n){var r,i,u;function o(){var l,p,v;l=u.s,!(l!=null&&l.$==0||l!=null&&l.$==2)&&(p=S.ValueAndForever(t),v=S.ValueAndForever(n),p!=null&&p.$==1&&v!=null&&v.$==1&&(p.$0[1]&&v.$0[1]?S.MarkForever(u,null):S.MarkReady(u,null)))}return r=t.s,i=n.s,r!=null&&r.$==0?i!=null&&i.$==0?S.New({$:0,$0:null}):n:i!=null&&i.$==0?t:(u=S.New({$:3,$0:[],$1:[]}),S.When(t,o,u),S.When(n,o,u),u)},S.WhenObsolete=function(t,n){var r;r=t.s,r==null?S.Obsolete(n):(r!=null&&r.$==2||r!=null&&r.$==3)&&S.EnqueueSafe(r.$1,n)},S.ValueAndForever=function(t){var n;return n=t.s,n!=null&&n.$==0?{$:1,$0:[n.$0,!0]}:n!=null&&n.$==2?{$:1,$0:[n.$0,!1]}:null},y.Equals=function(t,n){var r,i;if(t===n)return!0;if(r=typeof t,r=="object"){if(t==null||n===null||n===void 0||!y.Equals(typeof n,"object"))return!1;if("Equals"in t)return t.Equals(n);if("Equals"in n)return!1;if(t instanceof h.Array&&n instanceof h.Array)return y.arrayEquals(t,n);if(t instanceof h.Date&&n instanceof h.Date)return y.dateEquals(t,n);i=[!0];for(var u in t)if(function(l){return i[0]=!t.hasOwnProperty(l)||n.hasOwnProperty(l)&&y.Equals(t[l],n[l]),!i[0]}(u))break;if(i[0]){for(var o in n)if(function(l){return i[0]=!n.hasOwnProperty(l)||t.hasOwnProperty(l),!i[0]}(o))break}return i[0]}else return r=="function"&&("$Func"in t?t.$Func===n.$Func&&t.$Target===n.$Target:"$Invokes"in t&&"$Invokes"in n&&y.arrayEquals(t.$Invokes,n.$Invokes))},y.arrayEquals=function(t,n){var r,i;if(f.length(t)===f.length(n)){for(r=!0,i=0;r&&i<f.length(t);)y.Equals(f.get(t,i),f.get(n,i))||(r=!1),i=i+1;return r}else return!1},y.dateEquals=function(t,n){return t.getTime()===n.getTime()},y.Hash=function(t){var n;return n=typeof t,n=="function"?0:n=="boolean"?t?1:0:n=="number"?t:n=="string"?y.hashString(t):n=="object"?t==null?0:t instanceof h.Array?y.hashArray(t):y.hashObject(t):0},y.hashString=function(t){var n,r,i;if(t===null)return 0;for(n=5381,r=0,i=t.length-1;r<=i;r++)n=y.hashMix(n,t[r].charCodeAt());return n},y.hashArray=function(t){var n,r,i;for(n=-34948909,r=0,i=f.length(t)-1;r<=i;r++)n=y.hashMix(n,y.Hash(f.get(t,r)));return n},y.hashObject=function(t){var n;if("GetHashCode"in t)return t.GetHashCode();n=[0];for(var r in t)(function(i){return n[0]=y.hashMix(y.hashMix(n[0],y.hashString(i)),y.Hash(t[i])),!1})(r);return n[0]},y.hashMix=function(t,n){return(t<<5)+t+n},y.Compare=function(t,n){var r,i,u;if(t===n)return 0;switch(r=typeof t,r=="function"?1:r=="boolean"||r=="number"||r=="string"?2:r=="object"?3:0){case 0:return typeof n>"u"?0:-1;case 1:return $.FailWith("Cannot compare function values.");case 2:return t<n?-1:1;case 3:if(t===null)i=-1;else if(n===null)i=1;else if("CompareTo"in t)i=t.CompareTo(n);else if("CompareTo0"in t)i=t.CompareTo0(n);else if(t instanceof h.Array&&n instanceof h.Array)i=y.compareArrays(t,n);else if(t instanceof h.Date&&n instanceof h.Date)i=y.compareDates(t,n);else{u=[0];for(var o in t)if(function(p){return t.hasOwnProperty(p)?n.hasOwnProperty(p)?(u[0]=y.Compare(t[p],n[p]),u[0]!==0):(u[0]=1,!0):!1}(o))break;if(u[0]===0){for(var l in n)if(function(p){return n.hasOwnProperty(p)?!t.hasOwnProperty(p)&&(u[0]=-1,!0):!1}(l))break}i=u[0]}return i}},y.compareArrays=function(t,n){var r,i;if(f.length(t)<f.length(n))return-1;if(f.length(t)>f.length(n))return 1;for(r=0,i=0;r===0&&i<f.length(t);)r=y.Compare(f.get(t,i),f.get(n,i)),i=i+1;return r},y.compareDates=function(t,n){return y.Compare(t.getTime(),n.getTime())},Ze.GetFields=function(t){var n;n=[];for(var r in t)n.push([r,t[r]]);return n},Ze.GetFieldValues=function(t){var n;n=[];for(var r in t)n.push(t[r]);return n},f.get=function(t,n){return f.checkBounds(t,n),t[n]},f.length=function(t){return t.dims===2?t.length*t.length:t.length},f.checkBounds=function(t,n){(n<0||n>=t.length)&&$.FailWith("Index was outside the bounds of the array.")},f.set=function(t,n,r){f.checkBounds(t,n),t[n]=r},f.map=function(t,n){var r,i,u;for(r=new h.Array(n.length),i=0,u=n.length-1;i<=u;i++)r[i]=t(n[i]);return r},f.ofSeq=function(t){var n,r;if(t instanceof h.Array)return t.slice();if(t instanceof Xe)return f.ofList(t);n=[],r=O.Get(t);try{for(;r.MoveNext();)n.push(r.Current());return n}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},f.ofList=function(t){var n,r;for(r=[],n=t;n.$!=0;)r.push(he.head(n)),n=he.tail(n);return r},f.exists=function(t,n){var r,i,u;for(r=!1,i=0,u=f.length(n);!r&&i<u;)t(n[i])?r=!0:i=i+1;return r},f.tryPick=function(t,n){var r,i,u;for(r=null,i=0;i<n.length&&r==null;)u=t(n[i]),u!=null&&u.$==1&&(r=u),i=i+1;return r},f.tryFindIndex=function(t,n){var r,i;for(r=null,i=0;i<n.length&&r==null;)t(n[i])&&(r={$:1,$0:i}),i=i+1;return r},f.filter=function(t,n){var r,i,u;for(r=[],i=0,u=n.length-1;i<=u;i++)t(n[i])&&r.push(n[i]);return r},f.iter=function(t,n){var r,i;for(r=0,i=n.length-1;r<=i;r++)t(n[r])},f.foldBack=function(t,n,r){var i,u,o,l;for(i=r,u=n.length,o=1,l=u;o<=l;o++)i=t(n[u-o],i);return i},f.pick=function(t,n){var r;return r=f.tryPick(t,n),r==null?$.FailWith("KeyNotFoundException"):r.$0},f.concat=function(t){return h.Array.prototype.concat.apply([],f.ofSeq(t))},f.choose=function(t,n){var r,i,u,o;for(r=[],i=0,u=n.length-1;i<=u;i++)o=t(n[i]),o==null||r.push(o.$0);return r},f.create=function(t,n){var r,i,u;for(r=new h.Array(t),i=0,u=t-1;i<=u;i++)r[i]=n;return r},f.init=function(t,n){var r,i,u;for(t<0&&$.FailWith("Negative size given."),r=new h.Array(t),i=0,u=t-1;i<=u;i++)r[i]=n(i);return r},f.forall=function(t,n){var r,i,u;for(r=!0,i=0,u=f.length(n);r&&i<u;)t(n[i])?i=i+1:r=!1;return r},R.concat=function(t,n){return f.ofSeq(n).join(t)},R.SplitChars=function(t,n,r){return R.Split(t,new h.RegExp("["+R.RegexEscape(n.join(""))+"]"),r)},R.StartsWith=function(t,n){return t.substring(0,n.length)==n},R.forall=function(t,n){return q.forall(t,R.protect(n))},R.Split=function(t,n,r){return r===1?f.filter(function(i){return i!==""},R.SplitWith(t,n)):R.SplitWith(t,n)},R.RegexEscape=function(t){return t.replace(new h.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&")},R.protect=function(t){return t??""},R.SplitWith=function(t,n){return t.split(n)},re.$cctor=function(){re.$cctor=h.ignore,re.income=Ae.Create$1(0),re.expense=Ae.Create$1(0),re.incomeInput=Ae.Create$1(0),re.expenseInput=Ae.Create$1(0)},Q=d.AttrProxy=N.Class({},null,Q),Q.HandlerImpl=function(t,n){return F.Static(function(r){r.addEventListener(t,function(i){return n(r)(i)},!1)})},Q.Create=function(t,n){return F.Static(function(r){r.setAttribute(t,n)})},Q.Concat=function(t){var n;return n=ae.ofSeqNonCopying(t),ae.TreeReduce(F.EmptyAttr(),Q.Append,n)},Q.Append=function(t,n){return F.AppendTree(t,n)},A.LoadLocalTemplates=function(t){A.LocalTemplatesLoaded()||(A.set_LocalTemplatesLoaded(!0),A.LoadNestedTemplates(self.document.body,"")),A.LoadedTemplates().set_Item(t,A.LoadedTemplateFile(""))},A.LocalTemplatesLoaded=function(){return te.$cctor(),te.LocalTemplatesLoaded},A.set_LocalTemplatesLoaded=function(t){te.$cctor(),te.LocalTemplatesLoaded=t},A.LoadNestedTemplates=function(t,n){var r,i,u,o,l,p,v,U,V,K,L,x,m,g,C,P,_,G,M,j,ne;function fe(b){var Ne,Te;r.ContainsKey(b)||(Ne=(Te=null,[i.TryGetValue(b,{get:function(){return Te},set:function(Be){Te=Be}}),Te]),Ne[0]?(ne.SAdd(b),i.RemoveKey(b),A.PrepareTemplateStrict(n,{$:1,$0:b},Ne[1],{$:1,$0:fe})):Ce.warn(ne.Contains(b)?"Encountered loop when instantiating "+b:"Local template does not exist: "+b))}for(r=A.LoadedTemplateFile(n),i=new le.New$5,u=t.querySelectorAll("[ws-template]"),o=0,l=u.length-1;o<=l;o++)p=u[o],v=p.getAttribute("ws-template").toLowerCase(),p.removeAttribute("ws-template"),i.set_Item(v,A.FakeRootSingle(p));for(U=t.querySelectorAll("[ws-children-template]"),V=0,K=U.length-1;V<=K;V++)L=U[V],x=L.getAttribute("ws-children-template").toLowerCase(),L.removeAttribute("ws-children-template"),i.set_Item(x,A.FakeRoot(L));for(m=t.querySelectorAll("template[id]"),g=0,C=m.length-1;g<=C;g++)P=m[g],i.set_Item(P.getAttribute("id").toLowerCase(),A.FakeRootFromHTMLTemplate(P));for(_=t.querySelectorAll("template[name]"),G=0,M=_.length-1;G<=M;G++)j=_[G],i.set_Item(j.getAttribute("name").toLowerCase(),A.FakeRootFromHTMLTemplate(j));for(ne=new B.New$3;i.count>0;)fe(q.head(i.Keys()))},A.LoadedTemplates=function(){return te.$cctor(),te.LoadedTemplates},A.LoadedTemplateFile=function(t){var n,r,i;return n=(r=null,[A.LoadedTemplates().TryGetValue(t,{get:function(){return r},set:function(u){r=u}}),r]),n[0]?n[1]:(i=new le.New$5,A.LoadedTemplates().set_Item(t,i),i)},A.FakeRootSingle=function(t){var n,r,i,u;return t.removeAttribute("ws-template"),n=t.getAttribute("ws-replace"),n==null||(t.removeAttribute("ws-replace"),r=t.parentNode,y.Equals(r,null)||(i=self.document.createElement(t.tagName),i.setAttribute("ws-replace",n),r.replaceChild(i,t))),u=self.document.createElement("div"),u.appendChild(t),u},A.FakeRoot=function(t){var n;for(n=self.document.createElement("div");t.hasChildNodes();)n.appendChild(t.firstChild);return n},A.FakeRootFromHTMLTemplate=function(t){var n,r,i,u;for(n=self.document.createElement("div"),r=t.content,i=0,u=r.childNodes.length-1;i<=u;i++)n.appendChild(r.childNodes[i].cloneNode(!0));return n},A.PrepareTemplateStrict=function(t,n,r,i){var u,o;function l(L,x){var m,g,C,P,_,G,M,j,ne,fe,b,Ne,Te,Be,He,At,Ge,gt,ut,Et,wt,Ct,ot,St,et;function It(Je){}for(;;)switch(L){case 0:if(x!==null)m=x.nextSibling,y.Equals(x.nodeType,Re.TEXT_NODE)?J.convertTextNode(x):y.Equals(x.nodeType,Re.ELEMENT_NODE)&&v(x),x=m;else return null;break;case 1:if(_=Ee.string(x.nodeName,{$:1,$0:3},null).toLowerCase(),G=(g=_.indexOf("."),g===-1?[t,_]:[Ee.string(_,null,{$:1,$0:g-1}),Ee.string(_,{$:1,$0:g+1},null)]),M=G[1],j=G[0],j!=""&&!A.LoadedTemplates().ContainsKey(j))return J.failNotLoaded(M);if(j==""&&i!=null&&i.$0(M),ne=A.LoadedTemplates().Item(j),ne.ContainsKey(M)){for(fe=ne.Item(M),b=fe.cloneNode(!0),Ne=new B.New$3,Te=new le.New$5,Be=x.attributes,He=0,At=Be.length-1;He<=At;He++)Ge=Be.item(He).name.toLowerCase(),Te.set_Item(Ge,(gt=Be.item(He).nodeValue,gt==""?Ge:gt.toLowerCase())),Ne.SAdd(Ge)||Ce.warn("Hole mapped twice",Ge);for(ut=0,Et=x.childNodes.length-1;ut<=Et;ut++)wt=x.childNodes[ut],y.Equals(wt.nodeType,Re.ELEMENT_NODE)&&(Ne.SAdd(wt.nodeName.toLowerCase())||Ce.warn("Hole filled twice",M));if(Ct=x.childNodes.length===1&&y.Equals(x.firstChild.nodeType,Re.TEXT_NODE),Ct&&(C=J.fillTextHole(b,x.firstChild.textContent,M),function(Je){return function(lt){lt!=null&&Je(lt.$0)}}((P=function(Je){return function(lt){return Je.SAdd(lt)}}(Ne),function(Je){return P(Je),void 0}))(C)),J.removeHolesExcept(b,Ne),!Ct)for(ot=0,St=x.childNodes.length-1;ot<=St;ot++)et=x.childNodes[ot],y.Equals(et.nodeType,Re.ELEMENT_NODE)&&(et.hasAttributes()?J.fillInstanceAttrs(b,et):p(b,et));J.mapHoles(b,Te),J.fill(b,x.parentNode,x),x.parentNode.removeChild(x);return}else return J.failNotLoaded(M)}}function p(L,x){var m,g,C,P;function _(G,M){var j;if(C=="title"&&x.hasChildNodes())for(j=Z.ParseHTMLIntoFakeRoot(x.textContent),x.removeChild(x.firstChild);j.hasChildNodes();)x.appendChild(j.firstChild);return v(x),J.fill(x,G,M)}if(C=x.nodeName.toLowerCase(),A.foreachNotPreserved(L,"[ws-attr-holes]",function(G){var M,j,ne,fe,b;for(M=R.SplitChars(G.getAttribute("ws-attr-holes"),[" "],1),j=0,ne=M.length-1;j<=ne;j++)fe=f.get(M,j),G.setAttribute(fe,(b=new h.RegExp("\\${"+C+"}","ig"),G.getAttribute(fe).replace(b,x.textContent)))}),P=L.querySelector("[ws-hole="+C+"]"),y.Equals(P,null))return m=L.querySelector("[ws-replace="+C+"]"),y.Equals(m,null)?(g=L.querySelector("slot[name="+C+"]"),L.tagName.toLowerCase()=="template"?(_(g.parentNode,g),void g.parentNode.removeChild(g)):null):(_(m.parentNode,m),void m.parentNode.removeChild(m));for(;P.hasChildNodes();)P.removeChild(P.lastChild);return P.removeAttribute("ws-hole"),_(P,null)}function v(L){L.hasAttribute("ws-preserve")||(R.StartsWith(L.nodeName.toLowerCase(),"ws-")?V(L):(J.convertAttrs(L),U(L.firstChild)))}function U(L){return l(0,L)}function V(L){return l(1,L)}function K(L){for(var x,m,g,C,P,_,G,M,j,ne,fe,b;;)if(x=L.querySelector("[ws-template]"),y.Equals(x,null))if(m=L.querySelector("[ws-children-template]"),y.Equals(m,null)){for(g=L.querySelectorAll("template[id]"),C=1,P=g.length-1;C<=P;C++)_=g[C],u.Contains(_)||(A.PrepareTemplateStrict(t,{$:1,$0:_.getAttribute("id")},_,null),u.SAdd(_));for(G=L.querySelectorAll("template[name]"),M=1,j=G.length-1;M<=j;M++)ne=G[M],u.Contains(ne)||(A.PrepareTemplateStrict(t,{$:1,$0:ne.getAttribute("name")},ne,null),u.SAdd(ne));return null}else fe=m.getAttribute("ws-children-template"),m.removeAttribute("ws-children-template"),A.PrepareTemplateStrict(t,{$:1,$0:fe},m,null),L=L;else b=x.getAttribute("ws-template"),A.PrepareSingleTemplate(t,{$:1,$0:b},x)(null),L=L}u=new B.New$3,o=(n==null?"":n.$0).toLowerCase(),A.LoadedTemplateFile(t).set_Item(o,r),r.hasChildNodes()&&(K(r),U(r.firstChild))},A.foreachNotPreserved=function(t,n,r){Z.IterSelector(t,n,function(i){i.closest("[ws-preserve]")==null&&r(i)})},A.PrepareSingleTemplate=function(t,n,r){var i;return i=A.FakeRootSingle(r),function(u){A.PrepareTemplateStrict(t,n,i,u)}},A.TextHoleRE=function(){return te.$cctor(),te.TextHoleRE},Z.ParseHTMLIntoFakeRoot=function(t){var n,r,i,u,o;function l(p,v){for(var U;;){if(v===0)return p;U=v,p=p.lastChild,v=U-1}}return n=self.document.createElement("div"),Z.rhtml().test(t)?(r=(i=Z.rtagName().exec(t),y.Equals(i,null)?"":f.get(i,1).toLowerCase()),u=(o=Z.wrapMap()[r],o||Z.defaultWrap()),n.innerHTML=u[1]+t.replace(Z.rxhtmlTag(),"<$1></$2>")+u[2],l(n,u[0])):(n.appendChild(self.document.createTextNode(t)),n)},Z.rhtml=function(){return H.$cctor(),H.rhtml},Z.wrapMap=function(){return H.$cctor(),H.wrapMap},Z.defaultWrap=function(){return H.$cctor(),H.defaultWrap},Z.rxhtmlTag=function(){return H.$cctor(),H.rxhtmlTag},Z.rtagName=function(){return H.$cctor(),H.rtagName},Z.IterSelector=function(t,n,r){var i,u,o;for(i=t.querySelectorAll(n),u=0,o=i.length-1;u<=o;u++)r(i[u])},Z.InsertAt=function(t,n,r){var i;r.parentNode===t&&n===(i=r.nextSibling,y.Equals(i,null)?null:i)||t.insertBefore(r,n)},Z.RemoveNode=function(t,n){n.parentNode===t&&t.removeChild(n)},E.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:!1,Value:""}},E.UpdateTextNode=function(t,n){t.Value=n,t.Dirty=!0},E.LinkElement=function(t,n){E.InsertDoc(t,n,null)},E.InsertDoc=function(t,n,r){for(var i,u,o;;){if(n!=null&&n.$==1)return E.InsertNode(t,n.$0.El,r);if(n!=null&&n.$==2)i=n.$0,i.Dirty=!1,n=i.Current;else{if(n==null)return r;if(n!=null&&n.$==4)return E.InsertNode(t,n.$0.Text,r);if(n!=null&&n.$==5)return E.InsertNode(t,n.$0,r);if(n!=null&&n.$==6)return f.foldBack(function(l,p){return N.Curried3(function(v,U,V){return U==null||U.constructor===Pe?E.InsertDoc(v,U,V):E.InsertNode(v,U,V)})(t)(l)(p)},n.$0.Els,r);u=n.$1,o=n.$0,n=o,r=E.InsertDoc(t,u,r)}}},E.CreateRunState=function(t,n){return pt.New(X.get_Empty(),E.CreateElemNode(t,F.EmptyAttr(),n))},E.PerformAnimatedUpdate=function(t,n,r){return z.get_UseAnimations()?k.Delay(function(){var i,u,o;return i=X.FindAll(r),u=E.ComputeChangeAnim(n,i),o=E.ComputeEnterAnim(n,i),k.Bind(z.Play(z.Append(u,E.ComputeExitAnim(n,i))),function(){return k.Bind(E.SyncElemNodesNextFrame(t,n),function(){return k.Bind(z.Play(o),function(){return n.PreviousNodes=i,k.Return(null)})})})}):E.SyncElemNodesNextFrame(t,n)},E.PerformSyncUpdate=function(t,n,r){var i;i=X.FindAll(r),E.SyncElemNode(t,n.Top),n.PreviousNodes=i},E.CreateElemNode=function(t,n,r){var i;return E.LinkElement(t,r),i=F.Insert(t,n),We.New(i,r,null,t,ge.Int(),N.GetOptional(i.OnAfterRender))},E.InsertNode=function(t,n,r){return Z.InsertAt(t,r,n),n},E.SyncElemNodesNextFrame=function(t,n){function r(i){h.requestAnimationFrame(function(){E.SyncElemNode(t,n.Top),i()})}return tt.BatchUpdatesEnabled()?k.FromContinuations(function(i,u,o){return r.apply(null,[i,u,o])}):(E.SyncElemNode(t,n.Top),k.Return(null))},E.ComputeExitAnim=function(t,n){return z.Concat(f.map(function(r){return F.GetExitAnim(r.Attr)},X.ToArray(X.Except(n,X.Filter(function(r){return F.HasExitAnim(r.Attr)},t.PreviousNodes)))))},E.ComputeEnterAnim=function(t,n){return z.Concat(f.map(function(r){return F.GetEnterAnim(r.Attr)},X.ToArray(X.Except(t.PreviousNodes,X.Filter(function(r){return F.HasEnterAnim(r.Attr)},n)))))},E.ComputeChangeAnim=function(t,n){var r;function i(u){return F.HasChangeAnim(u.Attr)}return r=function(u){return X.Filter(i,u)},z.Concat(f.map(function(u){return F.GetChangeAnim(u.Attr)},X.ToArray(X.Intersect(r(t.PreviousNodes),r(n)))))},E.SyncElemNode=function(t,n){t||E.SyncElement(n),E.Sync(n.Children),E.AfterRender(n)},E.SyncElement=function(t){function n(r){function i(u){for(var o,l,p,v;;)if(u!=null&&u.$==0){if(l=u.$1,p=u.$0,i(p))return!0;u=l}else if(u!=null&&u.$==2){if(v=u.$0,v.Dirty)return!0;u=v.Current}else return u!=null&&u.$==6&&(o=u.$0,o.Dirty||f.exists(n,o.Holes))}return i(r.Children)}F.Sync(t.El,t.Attr),n(t)&&E.DoSyncElement(t)},E.Sync=function(t){for(var n,r,i,u,o;;){if(t!=null&&t.$==1)return E.SyncElemNode(!1,t.$0);if(t!=null&&t.$==2)i=t.$0,t=i.Current;else{if(t==null)return null;if(t!=null&&t.$==5)return null;if(t!=null&&t.$==4)return n=t.$0,n.Dirty?(n.Text.nodeValue=n.Value,n.Dirty=!1):null;if(t!=null&&t.$==6)return r=t.$0,f.iter(function(l){E.SyncElemNode(!1,l)},r.Holes),f.iter(function(l){F.Sync(l[0],l[1])},r.Attrs),E.AfterRender(r);u=t.$1,o=t.$0,E.Sync(o),t=u}}},E.AfterRender=function(t){var n;n=N.GetOptional(t.Render),n!=null&&n.$==1&&(n.$0(t.El),N.SetOptional(t,"Render",null))},E.DoSyncElement=function(t){var n,r,i;function u(o,l){for(var p,v,U,V;;){if(o!=null&&o.$==1)return o.$0.El;if(o!=null&&o.$==2){if(v=o.$0,v.Dirty)return v.Dirty=!1,E.InsertDoc(n,v.Current,l);o=v.Current}else{if(o==null)return l;if(o!=null&&o.$==4)return o.$0.Text;if(o!=null&&o.$==5)return o.$0;if(o!=null&&o.$==6)return p=o.$0,p.Dirty&&(p.Dirty=!1),f.foldBack(function(K,L){return K==null||K.constructor===Pe?u(K,L):K},p.Els,l);U=o.$1,V=o.$0,o=V,l=u(U,l)}}}n=t.El,we.Iter((r=t.El,function(o){Z.RemoveNode(r,o)}),we.Except(we.DocChildren(t),we.Children(t.El,N.GetOptional(t.Delimiters)))),u(t.Children,(i=N.GetOptional(t.Delimiters),i!=null&&i.$==1?i.$0[1]:null))},S.Obsolete=function(t){var n,r,i,u,o;if(r=t.s,!(r==null||(!(r!=null&&r.$==2||r!=null&&r.$==3)||(n=r.$1,!1))))for(t.s=null,i=0,u=f.length(n)-1;i<=u;i++)o=f.get(n,i),typeof o=="object"?function(l){S.Obsolete(l)}(o):o()},S.New=function(t){return{s:t}},q.append=function(t,n){return{GetEnumerator:function(){var r,i;return r=O.Get(t),i=[!0],new ce.New(r,null,function(u){var o;return u.s.MoveNext()?(u.c=u.s.Current(),!0):(o=u.s,y.Equals(o,null)||o.Dispose(),u.s=null,i[0]&&(i[0]=!1,u.s=O.Get(n),u.s.MoveNext()?(u.c=u.s.Current(),!0):(u.s.Dispose(),u.s=null,!1)))},function(u){var o;o=u.s,y.Equals(o,null)||o.Dispose()})}}},q.head=function(t){var n;n=O.Get(t);try{return n.MoveNext()?n.Current():q.insufficient()}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},q.delay=function(t){return{GetEnumerator:function(){return O.Get(t())}}},q.map=function(t,n){return{GetEnumerator:function(){var r;return r=O.Get(n),new ce.New(null,null,function(i){return r.MoveNext()&&(i.c=t(r.Current()),!0)},function(){r.Dispose()})}}},q.fold=function(t,n,r){var i,u;i=n,u=O.Get(r);try{for(;u.MoveNext();)i=t(i,u.Current());return i}finally{typeof u=="object"&&"Dispose"in u&&u.Dispose()}},q.init=function(t,n){return q.take(t,q.initInfinite(n))},q.iter=function(t,n){var r;r=O.Get(n);try{for(;r.MoveNext();)t(r.Current())}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},q.forall=function(t,n){return!q.exists(function(r){return!t(r)},n)},q.take=function(t,n){return t<0&&q.nonNegative(),{GetEnumerator:function(){var r;return r=[O.Get(n)],new ce.New(0,null,function(i){var u;return i.s=i.s+1,i.s>t?!1:(u=r[0],y.Equals(u,null)?q.insufficient():u.MoveNext()?(i.c=u.Current(),i.s===t&&(u.Dispose(),r[0]=null),!0):(u.Dispose(),r[0]=null,q.insufficient()))},function(){var i;i=r[0],y.Equals(i,null)||i.Dispose()})}}},q.initInfinite=function(t){return{GetEnumerator:function(){return new ce.New(0,null,function(n){return n.c=t(n.s),n.s=n.s+1,!0},void 0)}}},q.exists=function(t,n){var r,i;r=O.Get(n);try{for(i=!1;!i&&r.MoveNext();)i=t(r.Current());return i}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},q.max=function(t){var n,r,i;n=O.Get(t);try{for(n.MoveNext()||q.seqEmpty(),r=n.Current();n.MoveNext();)i=n.Current(),y.Compare(i,r)===1&&(r=i);return r}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},q.seqEmpty=function(){return $.FailWith("The input sequence was empty.")},Ae=d.Var$1=N.Class({},W,Ae),Ae.Create$1=function(t){return new Oe.New(!1,S.New({$:2,$0:t,$1:[]}),t)},xe.IntValueUnchecked=function(t){return xe.ValueWith(D.IntApplyUnchecked(),t)},xe.ValueWith=function(t,n){var r;return r=t(n),Q.Append(F.Static(r[0]),xe.DynamicCustom(r[1],r[2]))},xe.DynamicCustom=function(t,n){return F.Dynamic(n,t)},F.Static=function(t){return new Q({$:3,$0:t})},F.EmptyAttr=function(){return w.$cctor(),w.EmptyAttr},F.Updates=function(t){return ae.MapTreeReduce(function(n){return n.NChanged()},I.Const(),I.Map2Unit,t.DynNodes)},F.AppendTree=function(t,n){var r;return t===null?n:n===null?t:(r=new Q({$:2,$0:t,$1:n}),F.SetFlags(r,F.Flags(t)|F.Flags(n)),r)},F.Dynamic=function(t,n){return new Q({$:1,$0:new Ke.New(t,n)})},F.Insert=function(t,n){var r,i,u;function o(l){for(var p,v;;)if(l!==null){if(l!=null&&l.$==1)return r.push(l.$0);if(l!=null&&l.$==2)p=l.$1,v=l.$0,o(v),l=p;else return l!=null&&l.$==3?l.$0(t):l!=null&&l.$==4?i.push(l.$0):null}else return null}return r=[],i=[],o(n),u=r.slice(0),ft.New(t,F.Flags(n),u,i.length===0?null:{$:1,$0:function(l){q.iter(function(p){p(l)},i)}})},F.SetFlags=function(t,n){t.flags=n},F.Flags=function(t){return t!==null&&t.hasOwnProperty("flags")?t.flags:0},F.HasExitAnim=function(t){var n;return n=2,(t.DynFlags&n)===n},F.GetExitAnim=function(t){return F.GetAnim(t,function(n,r){return n.NGetExitAnim(r)})},F.HasEnterAnim=function(t){var n;return n=1,(t.DynFlags&n)===n},F.GetEnterAnim=function(t){return F.GetAnim(t,function(n,r){return n.NGetEnterAnim(r)})},F.HasChangeAnim=function(t){var n;return n=4,(t.DynFlags&n)===n},F.GetChangeAnim=function(t){return F.GetAnim(t,function(n,r){return n.NGetChangeAnim(r)})},F.GetAnim=function(t,n){return z.Concat(f.map(function(r){return n(r,t.DynElem)},t.DynNodes))},F.Sync=function(t,n){f.iter(function(r){r.NSync(t)},n.DynNodes)},le=ie.Dictionary=N.Class({set_Item:function(t,n){this.set(t,n)},ContainsKey:function(t){var n,r;return n=this,r=this.data[this.hash(t)],r==null?!1:f.exists(function(i){return n.equals.apply(null,[$.KeyValue(i)[0],t])},r)},TryGetValue:function(t,n){var r,i,u;return r=this,i=this.data[this.hash(t)],i==null?!1:(u=f.tryPick(function(o){var l;return l=$.KeyValue(o),r.equals.apply(null,[l[0],t])?{$:1,$0:l[1]}:null},i),u!=null&&u.$==1&&(n.set(u.$0),!0))},RemoveKey:function(t){return this.remove(t)},Keys:function(){return new Ve.New(this)},set:function(t,n){var r,i,u,o;r=this,i=this.hash(t),u=this.data[i],u==null?(this.count=this.count+1,this.data[i]=new h.Array({K:t,V:n})):(o=f.tryFindIndex(function(l){return r.equals.apply(null,[$.KeyValue(l)[0],t])},u),o==null?(this.count=this.count+1,u.push({K:t,V:n})):u[o.$0]={K:t,V:n})},remove:function(t){var n,r,i,u;return n=this,r=this.hash(t),i=this.data[r],i==null?!1:(u=f.filter(function(o){return!n.equals.apply(null,[$.KeyValue(o)[0],t])},i),f.length(u)<i.length&&(this.count=this.count-1,this.data[r]=u,!0))},Item:function(t){return this.get(t)},get:function(t){var n,r;return n=this,r=this.data[this.hash(t)],r==null?at.notPresent():f.pick(function(i){var u;return u=$.KeyValue(i),n.equals.apply(null,[u[0],t])?{$:1,$0:u[1]}:null},r)},GetEnumerator:function(){return O.Get0(f.concat(Ze.GetFieldValues(this.data)))}},W,le),le.New$5=N.Ctor(function(){le.New$6.call(this,[],y.Equals,y.Hash)},le),le.New$6=N.Ctor(function(t,n,r){var i,u;W.New.call(this),this.equals=n,this.hash=r,this.count=0,this.data=[],i=O.Get(t);try{for(;i.MoveNext();)u=i.Current(),this.set(u.K,u.V)}finally{typeof i=="object"&&"Dispose"in i&&i.Dispose()}},le),I=d.View=N.Class({},null,I),Oe=d.ConcreteVar=N.Class({get_View:function(){return this.view},Set:function(t){this.isConst?function(n){return n("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal")}(function(n){Ce.log(n)}):(S.Obsolete(this.snap),this.current=t,this.snap=S.New({$:2,$0:t,$1:[]}))},Get:function(){return this.current},UpdateMaybe:function(t){var n;n=t(this.Get()),n!=null&&n.$==1&&this.Set(n.$0)}},de,Oe),Oe.New=N.Ctor(function(t,n,r){var i;i=this,de.New.call(this),this.isConst=t,this.current=r,this.snap=n,this.view=function(){return i.snap},this.id=ge.Int()},Oe),O.Get=function(t){return t instanceof h.Array?O.ArrayEnumerator(t):y.Equals(typeof t,"string")?O.StringEnumerator(t):t.GetEnumerator()},O.ArrayEnumerator=function(t){return new ce.New(0,null,function(n){var r;return r=n.s,r<f.length(t)&&(n.c=f.get(t,r),n.s=r+1,!0)},void 0)},O.StringEnumerator=function(t){return new ce.New(0,null,function(n){var r;return r=n.s,r<t.length&&(n.c=t[r],n.s=r+1,!0)},void 0)},O.Get0=function(t){return t instanceof h.Array?O.ArrayEnumerator(t):y.Equals(typeof t,"string")?O.StringEnumerator(t):"GetEnumerator0"in t?t.GetEnumerator0():t.GetEnumerator()},ce=O.T=N.Class({MoveNext:function(){var t;return t=this.n(this),this.e=t?1:2,t},Current:function(){return this.e===1?this.c:this.e===0?$.FailWith("Enumeration has not started. Call MoveNext."):$.FailWith("Enumeration already finished.")},Dispose:function(){this.d&&this.d(this)}},W,ce),ce.New=N.Ctor(function(t,n,r,i){W.New.call(this),this.s=t,this.c=n,this.n=r,this.d=i,this.e=0},ce),D.IntApplyUnchecked=function(){return w.$cctor(),w.IntApplyUnchecked},D.ApplyValue=function(t,n,r){var i;function u(o,l){return l==null?null:o(l.$0)}return i=null,[function(o){function l(){r.UpdateMaybe(function(p){var v;return i=t(o),i!=null&&i.$==1&&!y.Equals(i.$0,p)&&(v=[i,i.$0],!0)?v[0]:null})}o.addEventListener("change",l),o.addEventListener("input",l),o.addEventListener("keypress",l)},function(o){var l;return l=n(o),function(p){return u(l,p)}},I.Map(function(o){return i!=null&&i.$==1&&y.Equals(i.$0,o)&&(i.$0,!0)?null:{$:1,$0:o}},r.get_View())]},D.StringSet=function(){return w.$cctor(),w.StringSet},D.StringGet=function(){return w.$cctor(),w.StringGet},D.DateTimeSetUnchecked=function(){return w.$cctor(),w.DateTimeSetUnchecked},D.DateTimeGetUnchecked=function(){return w.$cctor(),w.DateTimeGetUnchecked},D.FileApplyValue=function(t,n,r){var i;function u(o,l){return l==null?null:o(l.$0)}return i=null,[function(o){o.addEventListener("change",function(){r.UpdateMaybe(function(l){var p;return i=t(o),i!=null&&i.$==1&&i.$0!==l&&(p=[i,i.$0],!0)?p[0]:null})})},function(o){var l;return l=n(o),function(p){return u(l,p)}},I.Map(function(o){return i!=null&&i.$==1&&y.Equals(i.$0,o)&&(i.$0,!0)?null:{$:1,$0:o}},r.get_View())]},D.FileSetUnchecked=function(){return w.$cctor(),w.FileSetUnchecked},D.FileGetUnchecked=function(){return w.$cctor(),w.FileGetUnchecked},D.IntSetUnchecked=function(){return w.$cctor(),w.IntSetUnchecked},D.IntGetUnchecked=function(){return w.$cctor(),w.IntGetUnchecked},D.IntSetChecked=function(){return w.$cctor(),w.IntSetChecked},D.IntGetChecked=function(){return w.$cctor(),w.IntGetChecked},D.FloatSetUnchecked=function(){return w.$cctor(),w.FloatSetUnchecked},D.FloatGetUnchecked=function(){return w.$cctor(),w.FloatGetUnchecked},D.FloatSetChecked=function(){return w.$cctor(),w.FloatSetChecked},D.FloatGetChecked=function(){return w.$cctor(),w.FloatGetChecked},te.$cctor=function(){te.$cctor=h.ignore,te.LoadedTemplates=new le.New$5,te.LocalTemplatesLoaded=!1,te.GlobalHoles=new le.New$5,te.TextHoleRE="\\${([^}]+)}",te.RenderedFullDocTemplate=null},B=ie.HashSet=N.Class({SAdd:function(t){return this.add(t)},Contains:function(t){var n;return n=this.data[this.hash(t)],n==null?!1:this.arrContains(t,n)},add:function(t){var n,r;return n=this.hash(t),r=this.data[n],r==null?(this.data[n]=[t],this.count=this.count+1,!0):this.arrContains(t,r)?!1:(r.push(t),this.count=this.count+1,!0)},arrContains:function(t,n){var r,i,u;for(r=!0,i=0,u=n.length;r&&i<u;)this.equals.apply(null,[n[i],t])?r=!1:i=i+1;return!r},GetEnumerator:function(){return O.Get(Ye.concat(this.data))},ExceptWith:function(t){var n;n=O.Get(t);try{for(;n.MoveNext();)this.Remove(n.Current())}finally{typeof n=="object"&&"Dispose"in n&&n.Dispose()}},Count:function(){return this.count},IntersectWith:function(t){var n,r,i,u,o;for(n=new B.New$4(t,this.equals,this.hash),r=Ye.concat(this.data),i=0,u=r.length-1;i<=u;i++)o=r[i],n.Contains(o)||this.Remove(o)},Remove:function(t){var n;return n=this.data[this.hash(t)],n==null?!1:this.arrRemove(t,n)&&(this.count=this.count-1,!0)},CopyTo:function(t,n){var r,i,u;for(r=Ye.concat(this.data),i=0,u=r.length-1;i<=u;i++)f.set(t,i+n,r[i])},arrRemove:function(t,n){var r,i,u;for(r=!0,i=0,u=n.length;r&&i<u;)this.equals.apply(null,[n[i],t])?(n.splice.apply(n,[i,1]),r=!1):i=i+1;return!r}},W,B),B.New$3=N.Ctor(function(){B.New$4.call(this,[],y.Equals,y.Hash)},B),B.New$4=N.Ctor(function(t,n,r){var i;W.New.call(this),this.equals=n,this.hash=r,this.data=[],this.count=0,i=O.Get(t);try{for(;i.MoveNext();)this.add(i.Current())}finally{typeof i=="object"&&"Dispose"in i&&i.Dispose()}},B),B.New$2=N.Ctor(function(t){B.New$4.call(this,t,y.Equals,y.Hash)},B),ve=d.Elt=N.Class({},T,ve),ve.New=function(t,n,r){var i,u;return i=E.CreateElemNode(t,n,r.docNode),u=Se.Create(r.updates),new ve.New$1({$:1,$0:i},I.Map2Unit(F.Updates(i.Attr),u.v),t,u)},ve.New$1=N.Ctor(function(t,n,r,i){T.New.call(this,t,n),this.docNode$1=t,this.updates$1=n,this.elt=r,this.rvUpdates=i},ve),ae.ofSeqNonCopying=function(t){var n,r;if(t instanceof h.Array)return t;if(t instanceof Xe)return f.ofList(t);if(t===null)return[];n=[],r=O.Get(t);try{for(;r.MoveNext();)n.push(r.Current());return n}finally{typeof r=="object"&&"Dispose"in r&&r.Dispose()}},ae.TreeReduce=function(t,n,r){var i;function u(o){return function(l){var p;switch(l<=0?0:l===1&&o>=0&&o<i?1:2){case 0:return t;case 1:return f.get(r,o);case 2:return p=l/2>>0,n(u(o)(p),u(o+p)(l-p))}}}return i=f.length(r),u(0)(i)},ae.MapTreeReduce=function(t,n,r,i){var u;function o(l){return function(p){var v;switch(p<=0?0:p===1&&l>=0&&l<u?1:2){case 0:return n;case 1:return t(f.get(i,l));case 2:return v=p/2>>0,r(o(l)(v),o(l+v)(p-v))}}}return u=f.length(i),o(0)(u)},We=d.DocElemNode=N.Class({Equals:function(t){return this.ElKey===t.ElKey},GetHashCode:function(){return this.ElKey}},null,We),We.New=function(t,n,r,i,u,o){var l;return new We((l={Attr:t,Children:n,El:i,ElKey:u},N.SetOptional(l,"Delimiters",r),N.SetOptional(l,"Render",o),l))},Xe=he.T=N.Class({GetEnumerator:function(){return new ce.New(this,null,function(t){var n;return n=t.s,n.$==0?!1:(t.c=n.$0,t.s=n.$1,!0)},void 0)}},null,Xe),ge.Int=function(){return ge.set_counter(ge.counter()+1),ge.counter()},ge.set_counter=function(t){Ie.$cctor(),Ie.counter=t},ge.counter=function(){return Ie.$cctor(),Ie.counter},w.$cctor=function(){var t,n,r,i,u,o,l,p,v,U,V,K,L,x;w.$cctor=h.ignore,w.EmptyAttr=null,w.BoolCheckedApply=function(m){function g(C,P){return P!=null&&P.$==1?void(C.checked=P.$0):null}return[function(C){C.addEventListener("change",function(){return m.Get()!=C.checked?m.Set(C.checked):null})},function(C){return function(P){return g(C,P)}},I.Map(function(C){return{$:1,$0:C}},m.get_View())]},w.StringSet=function(m){return function(g){m.value=g}},w.StringGet=function(m){return{$:1,$0:m.value}},w.StringApply=(t=D.StringGet(),n=D.StringSet(),function(m){return D.ApplyValue(t,n,m)}),w.DateTimeSetUnchecked=function(m){return function(g){m.value=new h.Date(g).toLocaleString()}},w.DateTimeGetUnchecked=function(m){var g,C,P,_;return g=m.value,De.isBlank(g)?{$:1,$0:-864e13}:(C=(P=0,[(_=$t.TryParse(g),_!=null&&_.$==1&&(P=_.$0,!0)),P]),C[0]?{$:1,$0:C[1]}:null)},w.DateTimeApplyUnchecked=(r=D.DateTimeGetUnchecked(),i=D.DateTimeSetUnchecked(),function(m){return D.ApplyValue(r,i,m)}),w.FileSetUnchecked=function(){return function(){return null}},w.FileGetUnchecked=function(m){var g;return g=m.files,{$:1,$0:f.ofSeq(q.delay(function(){return q.map(function(C){return g.item(C)},$.range(0,g.length-1))}))}},w.FileApplyUnchecked=(u=D.FileGetUnchecked(),o=D.FileSetUnchecked(),function(m){return D.FileApplyValue(u,o,m)}),w.IntSetUnchecked=function(m){return function(g){m.value=h.String(g)}},w.IntGetUnchecked=function(m){var g,C;return g=m.value,De.isBlank(g)?{$:1,$0:0}:(C=+g,C!==C>>0?null:{$:1,$0:C})},w.IntApplyUnchecked=(l=D.IntGetUnchecked(),p=D.IntSetUnchecked(),function(m){return D.ApplyValue(l,p,m)}),w.IntSetChecked=function(m){return function(g){var C;return C=g.get_Input(),m.value!=C?void(m.value=C):null}},w.IntGetChecked=function(m){var g,C,P;return g=m.value,{$:1,$0:De.isBlank(g)?!m.checkValidity||m.checkValidity()?new pe({$:2,$0:g}):new pe({$:1,$0:g}):(C=(P=0,[Qe.TryParseInt32(g,{get:function(){return P},set:function(_){P=_}}),P]),C[0]?new pe({$:0,$0:C[1],$1:g}):new pe({$:1,$0:g}))}},w.IntApplyChecked=(v=D.IntGetChecked(),U=D.IntSetChecked(),function(m){return D.ApplyValue(v,U,m)}),w.FloatSetUnchecked=function(m){return function(g){m.value=h.String(g)}},w.FloatGetUnchecked=function(m){var g,C;return g=m.value,De.isBlank(g)?{$:1,$0:0}:(C=+g,h.isNaN(C)?null:{$:1,$0:C})},w.FloatApplyUnchecked=(V=D.FloatGetUnchecked(),K=D.FloatSetUnchecked(),function(m){return D.ApplyValue(V,K,m)}),w.FloatSetChecked=function(m){return function(g){var C;return C=g.get_Input(),m.value!=C?void(m.value=C):null}},w.FloatGetChecked=function(m){var g,C;return g=m.value,{$:1,$0:De.isBlank(g)?!m.checkValidity||m.checkValidity()?new pe({$:2,$0:g}):new pe({$:1,$0:g}):(C=+g,h.isNaN(C)?new pe({$:1,$0:g}):new pe({$:0,$0:C,$1:g}))}},w.FloatApplyChecked=(L=D.FloatGetChecked(),x=D.FloatSetChecked(),function(m){return D.ApplyValue(L,x,m)})},at.notPresent=function(){throw new $e.New},J.convertTextNode=function(t){var n,r,i,u,o;for(n=null,r=0,i=t.textContent,u=new h.RegExp(A.TextHoleRE(),"g");n=u.exec(i),n!==null;)t.parentNode.insertBefore(self.document.createTextNode(Ee.string(i,{$:1,$0:r},{$:1,$0:u.lastIndex-f.get(n,0).length-1})),t),r=u.lastIndex,o=self.document.createElement("span"),o.setAttribute("ws-replace",f.get(n,1).toLowerCase()),t.parentNode.insertBefore(o,t);u.lastIndex=0,t.textContent=Ee.string(i,{$:1,$0:r},null)},J.failNotLoaded=function(t){Ce.warn("Instantiating non-loaded template",t)},J.fillTextHole=function(t,n,r){var i;return i=t.querySelector("[ws-replace]"),y.Equals(i,null)?(Ce.warn("Filling non-existent text hole",r),null):(i.parentNode.replaceChild(self.document.createTextNode(n),i),{$:1,$0:i.getAttribute("ws-replace")})},J.removeHolesExcept=function(t,n){function r(i){A.foreachNotPreserved(t,"["+i+"]",function(u){n.Contains(u.getAttribute(i))||u.removeAttribute(i)})}r("ws-attr"),r("ws-onafterrender"),r("ws-var"),A.foreachNotPreserved(t,"[ws-hole]",function(i){if(!n.Contains(i.getAttribute("ws-hole")))for(i.removeAttribute("ws-hole");i.hasChildNodes();)i.removeChild(i.lastChild)}),A.foreachNotPreserved(t,"[ws-replace]",function(i){n.Contains(i.getAttribute("ws-replace"))||i.parentNode.removeChild(i)}),A.foreachNotPreserved(t,"[ws-on]",function(i){i.setAttribute("ws-on",R.concat(" ",f.filter(function(u){return n.Contains(f.get(R.SplitChars(u,[":"],1),1))},R.SplitChars(i.getAttribute("ws-on"),[" "],1))))}),A.foreachNotPreserved(t,"[ws-attr-holes]",function(i){var u,o,l,p,v;for(u=R.SplitChars(i.getAttribute("ws-attr-holes"),[" "],1),o=0,l=u.length-1;o<=l;o++)p=f.get(u,o),i.setAttribute(p,(v=new h.RegExp(A.TextHoleRE(),"g"),i.getAttribute(p).replace(v,function(U,V){return n.Contains(V)?U:""})))})},J.fillInstanceAttrs=function(t,n){var r,i,u,o,l;if(J.convertAttrs(n),r=n.nodeName.toLowerCase(),i=t.querySelector("[ws-attr="+r+"]"),y.Equals(i,null))Ce.warn("Filling non-existent attr hole",r);else for(i.removeAttribute("ws-attr"),u=0,o=n.attributes.length-1;u<=o;u++)l=n.attributes.item(u),l.name=="class"&&i.hasAttribute("class")?i.setAttribute("class",i.getAttribute("class")+" "+l.nodeValue):i.setAttribute(l.name,l.nodeValue)},J.mapHoles=function(t,n){function r(i){A.foreachNotPreserved(t,"["+i+"]",function(u){var o,l;o=(l=null,[n.TryGetValue(u.getAttribute(i).toLowerCase(),{get:function(){return l},set:function(p){l=p}}),l]),o[0]&&u.setAttribute(i,o[1])})}r("ws-hole"),r("ws-replace"),r("ws-attr"),r("ws-onafterrender"),r("ws-var"),A.foreachNotPreserved(t,"[ws-on]",function(i){i.setAttribute("ws-on",R.concat(" ",f.map(function(u){var o,l,p;return o=R.SplitChars(u,[":"],1),l=(p=null,[n.TryGetValue(f.get(o,1),{get:function(){return p},set:function(v){p=v}}),p]),l[0]?f.get(o,0)+":"+l[1]:u},R.SplitChars(i.getAttribute("ws-on"),[" "],1))))}),A.foreachNotPreserved(t,"[ws-attr-holes]",function(i){var u,o,l;for(u=R.SplitChars(i.getAttribute("ws-attr-holes"),[" "],1),o=0,l=u.length-1;o<=l;o++)(function(){var p;function v(U,V){var K;return K=$.KeyValue(V),U.replace(new h.RegExp("\\${"+K[0]+"}","ig"),"${"+K[1]+"}")}return p=f.get(u,o),i.setAttribute(p,N.Curried3(q.fold)(v)(i.getAttribute(p))(n))})()})},J.fill=function(t,n,r){for(;;)if(t.hasChildNodes())r=n.insertBefore(t.lastChild,r);else return null},J.convertAttrs=function(t){var n,r,i,u,o,l,p,v;function U(V){var K;K=t.getAttribute(V),K==null||t.setAttribute(V,K.toLowerCase())}for(n=t.attributes,r=[],i=[],u=[],o=0,l=n.length-1;o<=l;o++)p=n.item(o),R.StartsWith(p.nodeName,"ws-on")&&p.nodeName!="ws-onafterrender"&&p.nodeName!="ws-on"?(r.push(p.nodeName),i.push(Ee.string(p.nodeName,{$:1,$0:5},null)+":"+p.nodeValue.toLowerCase())):!R.StartsWith(p.nodeName,"ws-")&&new h.RegExp(A.TextHoleRE()).test(p.nodeValue)&&(p.nodeValue=(v=new h.RegExp(A.TextHoleRE(),"g"),p.nodeValue.replace(v,function(V,K){return"${"+K.toLowerCase()+"}"})),u.push(p.nodeName));i.length!=0&&t.setAttribute("ws-on",R.concat(" ",i)),u.length!=0&&t.setAttribute("ws-attr-holes",R.concat(" ",u)),U("ws-hole"),U("ws-replace"),U("ws-attr"),U("ws-onafterrender"),U("ws-var"),f.iter(function(V){t.removeAttribute(V)},r)},Ee.string=function(t,n,r){var i,u;return n==null?r!=null&&r.$==1?(i=r.$0,i<0?"":t.slice(0,i+1)):"":r==null?t.slice(n.$0):(u=r.$0,u<0?"":t.slice(n.$0,u+1))},q.insufficient=function(){return $.FailWith("The input sequence has an insufficient number of elements.")},q.nonNegative=function(){return $.FailWith("The input must be non-negative.")},Ve=ie.KeyCollection=N.Class({GetEnumerator:function(){return O.Get(q.map(function(t){return t.K},this.d))}},W,Ve),Ve.New=N.Ctor(function(t){W.New.call(this),this.d=t},Ve),Qe.TryParseInt32=function(t,n){return Qe.TryParse(t,-2147483648,2147483647,n)},z.get_UseAnimations=function(){return Y.UseAnimations()},z.Play=function(t){return k.Delay(function(){return k.Bind(z.Run(h.ignore,Y.Actions(t)),function(){return Y.Finalize(t),k.Return(null)})})},z.Append=function(t,n){return{$:0,$0:se.Append(t.$0,n.$0)}},z.Run=function(t,n){var r;function i(u){function o(l){return function(p){var v;return v=p-l,n.Compute(v),t(),v<=r?void h.requestAnimationFrame(function(U){o(l)(U)}):u()}}h.requestAnimationFrame(function(l){o(l)(l)})}return r=n.Duration,r===0?k.Zero():k.FromContinuations(function(u,o,l){return i.apply(null,[u,o,l])})},z.Concat=function(t){return{$:0,$0:se.Concat(q.map(Y.List,t))}},z.get_Empty=function(){return{$:0,$0:se.Empty()}},tt.BatchUpdatesEnabled=function(){return _e.$cctor(),_e.BatchUpdatesEnabled},ct.StartProcessor=function(t){var n;function r(){return k.Delay(function(){return k.Bind(t,function(){var i;return i=n[0],y.Equals(i,1)?(n[0]=0,k.Zero()):y.Equals(i,2)?(n[0]=1,r()):k.Zero()})})}return n=[0],function(){var i;i=n[0],y.Equals(i,0)?(n[0]=1,k.Start(r(),null)):y.Equals(i,1)&&(n[0]=2)}},Se=d.Updates=N.Class({},null,Se),Se.Create=function(t){var n;return n=null,n=Se.New(t,null,function(){var r;return r=n.s,r===null&&(r=S.Copy(n.c()),n.s=r,S.WhenObsoleteRun(r,function(){n.s=null})),r}),n},Se.New=function(t,n,r){return new Se({c:t,s:n,v:r})},ft.New=function(t,n,r,i){var u;return u={DynElem:t,DynFlags:n,DynNodes:r},N.SetOptional(u,"OnAfterRender",i),u},ht.Clear=function(t){t.splice(0,f.length(t))},he.head=function(t){return t.$==1?t.$0:he.listEmpty()},he.tail=function(t){return t.$==1?t.$1:he.listEmpty()},he.listEmpty=function(){return $.FailWith("The input list was empty.")},De.isBlank=function(t){return R.forall(dt.IsWhiteSpace,t)},pe=d.CheckedInput=N.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1}},null,pe),pt.New=function(t,n){return{PreviousNodes:t,Top:n}},X.get_Empty=function(){return{$:0,$0:new B.New$3}},X.FindAll=function(t){var n;function r(o,l){for(var p,v,U,V,K;;)switch(o){case 0:if(l!=null&&l.$==0)v=l.$1,U=l.$0,r(0,U),l=v;else if(l!=null&&l.$==1)V=l.$0,l=V,o=1;else if(l!=null&&l.$==2)K=l.$0,l=K.Current;else return l!=null&&l.$==6?(p=l.$0.Holes,function(L){return function(x){f.iter(L,x)}}(u)(p)):null;break;case 1:n.push(l),l=l.Children,o=0;break}}function i(o){return r(0,o)}function u(o){return r(1,o)}return n=[],i(t),{$:0,$0:new B.New$2(n)}},X.Filter=function(t,n){return{$:0,$0:oe.Filter(t,n.$0)}},X.Except=function(t,n){return{$:0,$0:oe.Except(t.$0,n.$0)}},X.ToArray=function(t){return oe.ToArray(t.$0)},X.Intersect=function(t,n){return{$:0,$0:oe.Intersect(t.$0,n.$0)}},k.Delay=function(t){return function(n){try{t(null)(n)}catch(r){n.k({$:1,$0:r})}}},k.Bind=function(t,n){return k.checkCancel(function(r){t(rt.New(function(i){var u;i.$==0?(u=i.$0,k.scheduler().Fork(function(){try{n(u)(r)}catch(o){r.k({$:1,$0:o})}})):k.scheduler().Fork(function(){r.k(i)})},r.ct))})},k.Zero=function(){return ue.$cctor(),ue.Zero},k.Start=function(t,n){var r,i;r=(i=k.defCTS()[0],n==null?i:n.$0),k.scheduler().Fork(function(){r.c||t(rt.New(function(u){u.$==1&&k.UncaughtAsyncError(u.$0)},r))})},k.Return=function(t){return function(n){n.k({$:0,$0:t})}},k.scheduler=function(){return ue.$cctor(),ue.scheduler},k.checkCancel=function(t){return function(n){n.ct.c?k.cancel(n):t(n)}},k.defCTS=function(){return ue.$cctor(),ue.defCTS},k.UncaughtAsyncError=function(t){Ce.log("WebSharper: Uncaught asynchronous exception",t)},k.FromContinuations=function(t){return function(n){var r;function i(u){r[0]?$.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times"):(r[0]=!0,k.scheduler().Fork(u))}r=[!1],t(function(u){i(function(){n.k({$:0,$0:u})})},function(u){i(function(){n.k({$:1,$0:u})})},function(u){i(function(){n.k({$:2,$0:u})})})}},k.cancel=function(t){t.k({$:2,$0:new me.New(t.ct)})},Y.UseAnimations=function(){return Ue.$cctor(),Ue.UseAnimations},Y.Actions=function(t){return Y.ConcatActions(f.choose(function(n){return n.$==1?{$:1,$0:n.$0}:null},se.ToArray(t.$0)))},Y.Finalize=function(t){f.iter(function(n){n.$==0&&n.$0()},se.ToArray(t.$0))},Y.ConcatActions=function(t){var n,r,i,u;return n=ae.ofSeqNonCopying(t),r=f.length(n),r===0?Y.Const():r===1?f.get(n,0):(i=q.max(q.map(function(o){return o.Duration},n)),u=f.map(function(o){return Y.Prolong(i,o)},n),Y.Def(i,function(o){f.iter(function(l){l.Compute(o)},u)}))},Y.List=function(t){return t.$0},Y.Const=function(t){return Y.Def(0,function(){return t})},Y.Def=function(t,n){return{Compute:n,Duration:t}},Y.Prolong=function(t,n){var r,i,u;return r=n.Compute,i=n.Duration,u=qe.Create(function(){return n.Compute(n.Duration)}),{Compute:function(o){return o>=i?u.f():r(o)},Duration:t}},_e.$cctor=function(){_e.$cctor=h.ignore,_e.BatchUpdatesEnabled=!0},Ie.$cctor=function(){Ie.$cctor=h.ignore,Ie.counter=0},dt.IsWhiteSpace=function(t){return t.match(new h.RegExp("\\s"))!==null},$t.TryParse=function(t){var n;return n=it.parse(t),h.isNaN(n)?null:{$:1,$0:n}},Qe.TryParse=function(t,n,r,i){var u,o;return u=+t,o=u===u-u%1&&u>=n&&u<=r,o&&i.set(u),o},Ke=d.DynamicAttrNode=N.Class({NChanged:function(){return this.updates},NGetExitAnim:function(t){return z.get_Empty()},NGetEnterAnim:function(t){return z.get_Empty()},NGetChangeAnim:function(t){return z.get_Empty()},NSync:function(t){this.dirty&&(this.push(t)(this.value),this.dirty=!1)}},W,Ke),Ke.New=N.Ctor(function(t,n){var r;r=this,W.New.call(this),this.push=n,this.value=void 0,this.dirty=!1,this.updates=I.Map(function(i){r.value=i,r.dirty=!0},t)},Ke),H.$cctor=function(){var t;H.$cctor=h.ignore,H.rxhtmlTag=new h.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi"),H.rtagName=new h.RegExp("<([\\w:]+)"),H.rhtml=new h.RegExp("<|&#?\\w+;"),H.wrapMap=(t=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:t,tbody:t,tfoot:t,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]}),H.defaultWrap=[0,"",""]},Ue.$cctor=function(){Ue.$cctor=h.ignore,Ue.CubicInOut=ke.Custom(function(t){var n;return n=t*t,3*n-2*(n*t)}),Ue.UseAnimations=!0},se.Append=function(t,n){return t.$==0?n:n.$==0?t:{$:2,$0:t,$1:n}},se.ToArray=function(t){var n;function r(i){for(var u,o;;){if(i.$==1)return n.push(i.$0);if(i.$==2)u=i.$1,o=i.$0,r(o),i=u;else return i.$==3?f.iter(function(l){n.push(l)},i.$0):null}}return n=[],r(t),n.slice(0)},se.Concat=function(t){var n;return n=ae.ofSeqNonCopying(t),ae.TreeReduce(se.Empty(),se.Append,n)},se.Empty=function(){return je.$cctor(),je.Empty},Ye.concat=function(t){var n;n=[];for(var r in t)n.push.apply(n,t[r]);return n},$e=a.KeyNotFoundException=N.Class({},nt,$e),$e.New=N.Ctor(function(){$e.New$1.call(this,"The given key was not present in the dictionary.")},$e),$e.New$1=N.Ctor(function(t){this.message=t,Pe.setPrototypeOf(this,$e.prototype)},$e),Me=k.Scheduler=N.Class({Fork:function(t){var n;n=this,this.robin.push(t),this.idle&&(this.idle=!1,h.setTimeout(function(){n.tick()},0))},tick:function(){var t,n,r;for(n=this,r=it.now(),t=!0;t;)this.robin.length===0?(this.idle=!0,t=!1):(this.robin.shift()(),it.now()-r>40&&(h.setTimeout(function(){n.tick()},0),t=!1))}},W,Me),Me.New=N.Ctor(function(){W.New.call(this),this.idle=!0,this.robin=[]},Me),ke=d.Easing=N.Class({},W,ke),ke.Custom=function(t){return new ke.New(t)},ke.New=N.Ctor(function(t){W.New.call(this),this.transformTime=t},ke),rt.New=function(t,n){return{k:t,ct:n}},ue.$cctor=function(){ue.$cctor=h.ignore,ue.noneCT=mt.New(!1,[]),ue.scheduler=new Me.New,ue.defCTS=[new be.New],ue.Zero=k.Return(),ue.GetCT=function(t){t.k({$:0,$0:t.ct})}},mt.New=function(t,n){return{c:t,r:n}},oe.Filter=function(t,n){return new B.New$2(f.filter(t,oe.ToArray(n)))},oe.Except=function(t,n){var r;return r=new B.New$2(oe.ToArray(n)),r.ExceptWith(oe.ToArray(t)),r},oe.ToArray=function(t){var n;return n=f.create(t.Count(),void 0),t.CopyTo(n,0),n},oe.Intersect=function(t,n){var r;return r=new B.New$2(oe.ToArray(t)),r.IntersectWith(oe.ToArray(n)),r},be=a.CancellationTokenSource=N.Class({},W,be),be.New=N.Ctor(function(){W.New.call(this),this.c=!1,this.pending=null,this.r=[],this.init=1},be),we.Children=function(t,n){var r,i,u;if(n!=null&&n.$==1){for(u=[],r=n.$0[0].nextSibling;r!==n.$0[1];)u.push(r),r=r.nextSibling;return{$:0,$0:u}}else return{$:0,$0:f.init(t.childNodes.length,(i=t.childNodes,function(o){return i[o]}))}},we.Except=function(t,n){var r;return r=t.$0,{$:0,$0:f.filter(function(i){return f.forall(function(u){return i!==u},r)},n.$0)}},we.Iter=function(t,n){f.iter(t,n.$0)},we.DocChildren=function(t){var n;function r(i){for(var u,o,l,p;;)if(i!=null&&i.$==2)o=i.$0,i=o.Current;else{if(i!=null&&i.$==1)return n.push(i.$0.El);if(i==null)return null;if(i!=null&&i.$==5)return n.push(i.$0);if(i!=null&&i.$==4)return n.push(i.$0.Text);if(i!=null&&i.$==6)return u=i.$0.Els,function(v){return function(U){f.iter(v,U)}}(function(v){v==null||v.constructor===Pe?r(v):n.push(v)})(u);l=i.$1,p=i.$0,r(p),i=l}}return n=[],r(t.Children),{$:0,$0:ae.ofSeqNonCopying(n)}},me=a.OperationCanceledException=N.Class({},nt,me),me.New=N.Ctor(function(t){me.New$1.call(this,"The operation was canceled.",null,t)},me),me.New$1=N.Ctor(function(t,n,r){this.message=t,this.inner=n,Pe.setPrototypeOf(this,me.prototype),this.ct=r},me),qe.Create=function(t){return vt.New(!1,t,qe.forceLazy)},qe.forceLazy=function(){var t;return t=this.v(),this.c=!0,this.v=t,this.f=qe.cachedLazy,t},qe.cachedLazy=function(){return this.v},je.$cctor=function(){je.$cctor=h.ignore,je.Empty={$:0}},vt.New=function(t,n,r){return{c:t,v:n,f:r}},N.OnLoad(function(){s.Main()})})(self);typeof WebSharper<"u"&&(WebSharper.Runtime.ScriptBasePath="/Content/",WebSharper.Runtime.Start());
